# Service Manual

## Cookies

### What are they?

Cookies are small text files stored within the client web browser that are generated by the website that the user has visited. The text files generally contain non-personal information for such things as:

* Storing the end-user preferences
* Recognising the end-user device
* Targeted ad-serving
* Basic state management, often used in conjunction with authentication
* Improving the user experience  ### What types of cookie are there?

We can categorise cookies into the following types:

#### First Party

These are cookies which are generated and maintain by the website you are visiting.

#### Third Party Cookies 
These are cookies that are not generated and maintained by the current website you are visiting. 
#### Session Cookie

This is a cookie which is only available for the duration of the end-users visit to a website. These are often referred to as ***transient*** cookies and are deleted when the web browser is terminated resulting in the user session being destroyed.

#### Persistent Cookie 
As the name implies, this type of cookie exists out with of the duration of the user session. These types of cookie have a ***Max-Age*** set and are often used for tracking how a user arrived at the current website.  

#### Secure Cookie
A secure cookie is served via encrypted channels (HTTPS) and has the secure attribute enabled. These two factors mean that the cookie is always sent to the client web browser encrypted. This approach helps reduce the risk of having session cookie theft via cross-site scripting.

#### HttpOnly Cookie 
In order for a cookie to be HttpOnly it must implement the HttpOnly attribute. An additional complexity is that this attribute is only support by modern web browsers. The HttpOnly cookie is transmitted over HTTP or HTTPS and is limited to that protocol only; meaning that it mitigates but does eliminate the potential for cookie theft. 
#### Zombie Cookie

This is a cookie that when deleted is automatically re-created by virtue of the execution of a script located elsewhere. This approach is commonly used in modern web-browsers to allow the use of features such as local storage and other client-side HTML5 technologies.

### The Structure of a Cookie
In order to be a valid cookie, browsers are expected to support:

* Cookie size of 50KB
* 50 cookies per top level domain
* Up to 3000 cookies total 
The internal structure of a cookie has seven components:

* A name value pair of the cookie i.e. name=value
* Expiry date of the cookie i.e. expires=***DATE***
* Path the cookie is used for path=***PATH***
* Domain the cookie is used for i.e. domain=mygov.scot
* Enablement of secure attribute ***secure***
* How the cookie can be accessed i.e. HttpOnly

The first component (name, value) is required to be explicitly set.
 ### What lies inside a cookie
 Here’s an example of a HttpOnly cookie set for the mygov.scot domain:
 > Set-Cookie: foo=bar; Expires=Tue, 17-June-2014 21:47:38 GMT; Path=/; Domain=.mygov.scot; HttpOnly 
Here’s an example of a secure cookie set for the mygov.scot domain: 
> Set-Cookie: secureFoo=secureBar; Expires=Tue, 25-Jan-2014 09:12:21 GMT; Path=/; Domain=.mygov.scot; secure 
###What about my privacy?

To comply with changes to EU law, any website operator whom is using cookies must:

* Gain explicit, informed consent from the user
* Via implied consent be assured that the end-user understands that their action will result in cookies being stored in their web browser
* Be assured that the cookie is essentially to the functioning of the website  Compliance with this law is the sole responsibility of the website owner.

###References

* [ICO Privacy & Electronic Communications Regulations](http://ico.org.uk/for_organisations/privacy_and_electronic_communications)
* [ICC Cookie Guide](http://www.international-chamber.co.uk/components/com_wordpress/wp/wp-content/uploads/2012/04/icc_uk_cookie_guide.pdf)
* [ICO Cookie Guidelines](http://ico.org.uk/for_organisations/privacy_and_electronic_communications/the_guide/cookies)
 
 
